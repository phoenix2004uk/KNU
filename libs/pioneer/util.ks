FUNCTION CheckFlameout {LIST ENGINES IN enList.FOR en IN enList IF en:FLAMEOUT RETURN TRUE. RETURN FALSE.}FUNCTION SafeStage {PARAMETER sMin IS 0, x IS 0. IF STAGE:NUMBER>sMin {LOCAL Tp IS THROTTLE. LOCK THROTTLE TO x. STAGE. WAIT UNTIL STAGE:READY. LOCK THROTTLE TO Tp.}}FUNCTION StageTo {PARAMETER sTo.UNTIL STAGE:NUMBER=sTo SafeStage().}FUNCTION AutoStage {PARAMETER sMin.UNTIL NOT CheckFlameout() {SafeStage(sMin).WAIT 0.}}FUNCTION DoPartEvent {PARAMETER p,m,a,i IS 0. SHIP:PartsDubbed(p)[i]:GetModule(m):DoEvent(a).}FUNCTION SetPartField {PARAMETER p,m,f,x,i IS 0. SHIP:PartsDubbed(p)[i]:GetModule(m):SetField(f,x).}FUNCTION DeployFairing {PARAMETER p,m IS "ModuleProceduralFairing",a IS "deploy". DoPartEvent(p,m,a).}