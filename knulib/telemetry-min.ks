{export(Lex("version","2.0.0","availableThrust",{RETURN SHIP:AVAILABLETHRUST*1e3.},"currentISP",{LIST ENGINES IN A.LOCAL B IS 0.LOCAL D IS 0.FOR F IN A IF F:IGNITION AND NOT F:FLAMEOUT{SET B TO B+F:AVAILABLETHRUST*1e3.SET D TO D+F:AVAILABLETHRUST*1e3/F:ISP.}IF D=0 RETURN 0.RETURN B/D.},"timeToImpact",{PARAMETER m.LOCAL g IS BODY:MU/(BODY:RADIUS+ALTITUDE)^2. LOCAL u IS SHIP:VERTICALSPEED. RETURN(SQRT(u^2+2*g*(ALT:RADAR-m))+u)/g.},"constantTWR",{parameter A.local B is SHIP:availableThrust. if B=0 return 0. return max(0,min(1,(A*SHIP:mass*BODY:mu/(BODY:radius+ALTITUDE)^2)/B)).})).}