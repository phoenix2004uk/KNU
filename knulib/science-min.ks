{LOCAL Y IS import("util/parts")["GetPartModule"].LOCAL X IS "ModuleScienceExperiment".LOCAL W IS "DMModuleScienceAnimate".LOCAL U IS{PARAMETER A,B,D,F,H IS 1,J IS 0.IF F AND(AIRSPEED>0.1 OR STATUS="SPLASHED")RETURN -1.LOCAL K IS Y(A,B,J).IF JF(K)RETURN -2.IF K:HASDATA RETURN -5.IF K:INOPERABLE RETURN -4. K:DEPLOY. LOCAL L IS TIME:SECONDS. UNTIL K:HASDATA IF TIME:SECONDS-L>10 RETURN -6.IF D K:TOGGLE. IF H{IF NOT HasKSCConnection()RETURN -3.ELSE{K:TRANSMIT. WAIT UNTIL NOT K:HASDATA.}}RETURN 0.}.LOCAL T IS{PARAMETER A,B,D IS 0.IF NOT HasKSCConnection()RETURN -3.LOCAL F IS Y(A,B,D).IF JF(F)RETURN -2.IF NOT F:HASDATA RETURN -7.F:TRANSMIT. WAIT UNTIL NOT F:HASDATA. RETURN 0.}.LOCAL S IS{PARAMETER A,B,D IS 0.LOCAL F IS Y(A,B,D).IF JF(F)RETURN -2.IF F:INOPERABLE RETURN -4.IF F:HASDATA F:RESET. WAIT 2.RETURN 0.}.LOCAL P IS Lex().LOCAL O IS Lex().LOCAL N IS Lex().FOR M IN List("sensorThermometer","sensorBarometer","sensorAccelerometer","sensorGravimeter","sensorAtmosphere","science.module","GooExperiment"){SET P[M]TO U:bind(M):bind(X):bind(FALSE).SET O[M]TO T:bind(M):bind(X).SET N[M]TO S:bind(M):bind(X).}FOR M IN List("dmmagBoom","rpwsAnt"){SET P[M]TO U:bind(M):bind(W):bind(TRUE).SET O[M]TO T:bind(M):bind(W).SET N[M]TO S:bind(M):bind(W).}FOR M IN P:KEYS SET P[M]TO P[M]:bind(List("sensorAccelerometer"):CONTAINS(M)).export(Lex("version","1.0.1","run",P,"transmit",O,"reset",N)).}