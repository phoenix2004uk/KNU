{IF NOT EXISTS("/etc/callsign"){LOCAL A IS SHIP:NAME. LOCAL B IS A. LOCAL D IS A. LOCAL F IS A. LOCAL H IS A:LENGTH. LOCAL J IS A:FIND("-").IF A:MATCHESPATTERN("^[A-Z]+-[0-9]+[a-zA-Z_]{0,1}$"){SET B TO A. SET D TO A. SET F TO A:SUBSTRING(0,J).}ELSE IF A:MATCHESPATTERN("^[A-Z]+ - [A-Z0-9 _]+$"){SET B TO A:SUBSTRING(J+2, H-J-2).SET D TO A. SET F TO A:SUBSTRING(0,J-1).}ELSE IF A:MATCHESPATTERN("^[A-Z]+-[0-9]+ ("+char(34)+"|')[A-Za-z0-9 _]+("+char(34)+"|')$"){LOCAL K IS A:FIND(" ").SET B TO A:SUBSTRING(K+2,H-K-3).SET D TO A:SUBSTRING(0,K-1).SET F TO A:SUBSTRING(0,J).}SET SHIP:NAME TO B. Write("/etc/callsign",B).Write("/etc/class",D).Write("/etc/mission",F).}IF NOT HasKSCConnection()KnuPanic("No connection to KSC").import("core/update").purge("core/update").export(Lex("version","1.1.1")).}